# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.
image:
  file: .gitpod.Dockerfile

tasks:
    - name: DB Migration and Seeding
      before: yarn install
      init: bash db_init.sh && yarn prisma migrate dev --name migration
      command: > 
        yarn seed
        gp sync-done setup
    - name: Build and Start App
      init: gp sync-await setup
      command: yarn build && yarn start
      openMode: split-right

ports:
  # MySQL
  - port: 3306
    onOpen: ignore
  # React dev server
  - port: 3000
    onOpen: open-preview


